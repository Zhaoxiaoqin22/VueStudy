<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>async和await发送ajax请求</title>
</head>
<body>
  <button id="b1"></button>
  <div id="showOn"></div>

  <script>

    let btn = document.getElementById('b1')
    let showOn = document.getElementById('showOn')

    function sendAJAX(url){
      return new Promise((resolve,reject)=>{
        let xhr = new XMLHttpRequest();
        xhr.open('GET',url)
        xhr.send()
        xhr.onreadystatechange = ()=>{
          if(xhr.readyState==4&&xhr.status==200){resolve(xhr)}
          else{reject(xhr)}
        }
      })
    }

    btn.onclick = async function(){
      let res = await sendAJAX('https://localhost:80/books/searchAll')
      showOn.innerHTML = res.response

    }


  </script>
</body>
</html>